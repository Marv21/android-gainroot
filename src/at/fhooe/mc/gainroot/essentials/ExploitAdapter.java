package at.fhooe.mc.gainroot.essentials;

import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import at.fhooe.mc.gainroot.R;

/**
 * Used to get a styled list of the exploit items.
 * 
 * @author Gerald Schoiber
 * @version 1.0
 * @see ArrayList, Context, LayoutInflater, View, ViewGroup, ArrayAdapter,
 *      TextView
 */
public class ExploitAdapter extends ArrayAdapter<Exploit> {

	/**
	 * Hold {@link Exploit} items which shown in adapter.
	 */
	private ArrayList<Exploit> m_items;

	/**
	 * Constructor with parameters. Set the {@link Exploit} items in
	 * {@link #m_items}.
	 * 
	 * @param _context
	 *            Context from caller, used from super().
	 * @param _textViewResourceId
	 *            Used from super().
	 * @param _items
	 *            {@link Exploit} items.
	 * @see Context, Integer, ArrayList, Exploit, m_items
	 */
	public ExploitAdapter(Context _context, int _textViewResourceId,
			ArrayList<Exploit> _items) {
		super(_context, _textViewResourceId);

		m_items = _items;
	}

	/**
	 * Set all {@link Exploit}'s as items into the {@link ArrayAdapter} with the
	 * 'R.layout.exploit_item' layout and return them.
	 * 
	 * @param _position
	 *            Position of the Exploit item.
	 * @param _convertView
	 *            The 'R.layout.exploit_item' layout.
	 * @param _parent
	 *            Parent ViewGroup.
	 * @return List of Exploits with the 'R.layout.exploit_item' style.
	 * @see View, ViewGroup, Integer, LayoutInflater, Context, Exploit,
	 *      TextView, m_items
	 */
	@Override
	public View getView(int _position, View _convertView, ViewGroup _parent) {
		View view = _convertView;
		if (view == null) {
			LayoutInflater inflater = (LayoutInflater) _parent.getContext()
					.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
			view = inflater.inflate(R.layout.exploit_item, null);
		}
		Exploit exploit = m_items.get(_position);
		if (exploit != null) {
			TextView tt = (TextView) view.findViewById(R.id.toptext);
			TextView bt = (TextView) view.findViewById(R.id.bottomtext);
			if (tt != null)
				tt.setText(exploit.getName());
			if (bt != null)
				bt.setText("versions: " + exploit.getVersions());
		}
		return view;
	}
}
